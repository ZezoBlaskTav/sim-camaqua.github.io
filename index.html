<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Produção Animal</title>
    <!-- Google Fonts para um visual mais moderno -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS para estilização rápida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Link para a sua folha de estilos externa -->
    <link rel="stylesheet" href="style.css">
    <!-- Bibliotecas para Geração de PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <div class="flex justify-center items-center gap-4 mb-2">
                <!-- LOGO EDITÁVEL -->
                <label for="logo-upload" class="cursor-pointer group">
                    <img id="logo-img" src="https://placehold.co/48x48/3B82F6/FFFFFF?text=Logo" alt="Logo do Estabelecimento" class="w-12 h-12 rounded-md object-cover transition-all group-hover:opacity-80">
                </label>
                <input type="file" id="logo-upload" class="hidden" accept="image/*">
                
                <div class="text-left">
                     <!-- NOME DO ESTABELECIMENTO EDITÁVEL -->
                     <input type="text" id="establishment-name" value="Nome do Estabelecimento" class="text-3xl md:text-4xl font-bold text-slate-700">
                     <p class="text-slate-500">Controle de Produção de Origem Animal</p>
                </div>
            </div>
             <!-- DADOS DO ESTABELECIMENTO AGRUPADOS -->
            <div class="max-w-4xl mx-auto mt-6 bg-white p-4 rounded-lg shadow-md border border-gray-200">
                <h3 class="text-lg font-semibold text-slate-600 mb-4 text-left">Informações do Estabelecimento</h3>
                <div id="establishment-details">
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                        <input type="text" id="establishment-address" placeholder="Endereço, Nº" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <input type="text" id="establishment-city" placeholder="Cidade/UF" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <input type="text" id="establishment-phone" placeholder="Telefone" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <input type="text" id="establishment-cnpj" placeholder="CNPJ" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>
            </div>
        </header>

        <div class="flex justify-center items-center gap-4 mb-8">
            <button id="abrir-popup-btn" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition-all duration-300 transform hover:scale-105">
                 Lançar Nova Produção
            </button>
            <button id="gerar-pdf-btn" class="bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-red-700 transition-all duration-300 transform hover:scale-105 flex items-center gap-2" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                 Gerar Relatório PDF
            </button>
        </div>

        <!-- O Popup (Modal) para lançamento de dados -->
        <div id="popup-overlay" class="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 hidden popup-enter">
            <div id="popup-box" class="bg-white rounded-xl shadow-2xl w-11/12 md:max-w-2xl max-h-[90vh] overflow-y-auto p-8">
                <h2 class="text-2xl font-bold text-slate-700 mb-6">Lançamento de Produção</h2>
                <form id="form-producao" class="space-y-6">
                    
                    <fieldset class="border border-gray-300 rounded-lg p-4">
                        <legend class="text-lg font-semibold text-blue-600 px-2">Dados da Matéria-Prima</legend>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                             <div>
                                <label for="data-recebimento" class="block text-sm font-medium text-gray-700">Data de Recebimento</label>
                                <input type="date" id="data-recebimento" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="tipo-materia-prima" class="block text-sm font-medium text-gray-10">Tipo</label>
                                <select id="tipo-materia-prima" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Selecione...</option>
                                    <option value="Bovino">Bovino</option>
                                    <option value="Suíno">Suíno</option>
                                    <option value="Aves">Aves</option>
                                    <option value="Pescado">Pescado</option>
                                </select>
                            </div>
                            <div>
                                <label for="corte-materia-prima" class="block text-sm font-medium text-gray-700">Corte/Descrição</label>
                                <input type="text" id="corte-materia-prima" placeholder="Ex: Picanha, Lombo" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="peso-materia-prima" class="block text-sm font-medium text-gray-700">Peso (kg)</label>
                                <input type="number" step="0.01" id="peso-materia-prima" placeholder="Ex: 50.5" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div class="md:col-span-2">
                                <label for="lote-materia-prima" class="block text-sm font-medium text-gray-700">Lote Matéria-Prima</label>
                                <input type="text" id="lote-materia-prima" placeholder="Ex: LOTE-MP-123" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset class="border border-gray-300 rounded-lg p-4">
                        <legend class="text-lg font-semibold text-green-600 px-2">Dados da Produção</legend>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                            <div>
                                <label for="data-producao" class="block text-sm font-medium text-gray-700">Data da Produção</label>
                                <input type="date" id="data-producao" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500">
                            </div>
                             <div>
                                <label for="produto-final" class="block text-sm font-medium text-gray-700">Produto Final</label>
                                <input type="text" id="produto-final" placeholder="Ex: Linguiça Toscana" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500">
                            </div>
                            <div>
                                <label for="peso-produzido" class="block text-sm font-medium text-gray-700">Peso Produzido (kg)</label>
                                <input type="number" step="0.01" id="peso-produzido" placeholder="Ex: 45.8" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500">
                            </div>
                            <div>
                                <label for="lote-produto-final" class="block text-sm font-medium text-gray-700">Lote Produto Final</label>
                                <input type="text" id="lote-produto-final" placeholder="Ex: LOTE-PF-456" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500">
                            </div>
                             <div class="md:col-span-2">
                                <label for="responsavel" class="block text-sm font-medium text-gray-700">Responsável</label>
                                <input type="text" id="responsavel" placeholder="Nome do operador" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500">
                            </div>
                        </div>
                    </fieldset>
                    
                    <div class="flex justify-end gap-4 pt-4">
                        <button type="button" id="fechar-popup-btn" class="bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">Cancelar</button>
                        <button type="submit" class="bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 transition-colors">Salvar Lançamento</button>
                    </div>
                </form>
            </div>
        </div>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <section class="bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-xl font-bold text-slate-700 mb-4">Planilha de Matéria-Prima</h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-600" id="tabela-materia-prima">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-200">
                            <tr>
                                <th class="px-4 py-3">Data Lanç.</th>
                                <th class="px-4 py-3">Data Receb.</th>
                                <th class="px-4 py-3">Tipo</th>
                                <th class="px-4 py-3">Corte</th>
                                <th class="px-4 py-3">Peso (kg)</th>
                                <th class="px-4 py-3">Lote</th>
                            </tr>
                        </thead>
                        <tbody>
                             <tr class="bg-white border-b hover:bg-gray-50">
                                <td colspan="6" class="text-center py-4 text-gray-500">Nenhum dado lançado ainda.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-xl font-bold text-slate-700 mb-4">Planilha de Produção</h2>
                 <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-600" id="tabela-producao">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-200">
                            <tr>
                                <th class="px-4 py-3">Data Prod.</th>
                                <th class="px-4 py-3">Produto Final</th>
                                <th class="px-4 py-3">Peso (kg)</th>
                                <th class="px-4 py-3">Lote Produto</th>
                                <th class="px-4 py-3">Responsável</th>
                                <th class="px-4 py-3">Lote MP Origem</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td colspan="6" class="text-center py-4 text-gray-500">Nenhum dado lançado ainda.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Link para o seu arquivo de script externo -->
    <script src="script.js"></script>
</body>
</html>
